<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ross Built Home Care</title>
    <!-- PWA Meta Tags -->
    <link rel="manifest" href="/manifest.json" />
    <meta name="theme-color" content="#2D5A27" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="Ross Built" />
    <link rel="apple-touch-icon" href="/icons/icon-192.png" />
  </head>
  <body>
    <div id="root"></div>
    <script>
      // Nuke any stale service workers and caches
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.getRegistrations().then(function(registrations) {
          registrations.forEach(function(reg) { reg.unregister(); });
        });
        caches.keys().then(function(names) {
          names.forEach(function(name) { caches.delete(name); });
        });
      }
      // Visible error overlay - shows JS errors on screen
      window.onerror = function(msg, src, line, col, err) {
        var d = document.createElement('div');
        d.style.cssText = 'position:fixed;top:0;left:0;right:0;z-index:99999;background:red;color:white;padding:20px;font-size:16px;font-family:monospace;white-space:pre-wrap;';
        d.textContent = 'JS ERROR: ' + msg + '\nFile: ' + src + ':' + line + ':' + col + '\n' + (err && err.stack ? err.stack : '');
        document.body.appendChild(d);
      };
      window.addEventListener('unhandledrejection', function(e) {
        var d = document.createElement('div');
        d.style.cssText = 'position:fixed;top:0;left:0;right:0;z-index:99999;background:orange;color:black;padding:20px;font-size:16px;font-family:monospace;white-space:pre-wrap;';
        d.textContent = 'PROMISE ERROR: ' + (e.reason ? (e.reason.message || e.reason) : 'unknown') + '\n' + (e.reason && e.reason.stack ? e.reason.stack : '');
        document.body.appendChild(d);
      });
    </script>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
