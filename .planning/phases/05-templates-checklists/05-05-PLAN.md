---
phase: 05-templates-checklists
plan: 05
type: execute
wave: 4
depends_on: ["05-03", "05-04"]
files_modified:
  - apps/admin/src/components/inspections/checklist-preview.tsx
  - apps/admin/src/components/inspections/index.ts
  - apps/admin/src/pages/properties/[id]/index.tsx
autonomous: true
---

<objective>
Create the Checklist Preview component and integrate it into the property detail page.

Purpose: Show generated inspection checklists for properties with active programs.
Output: ChecklistPreview component integrated into property pages.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

Prior plan outputs:
@.planning/phases/05-templates-checklists/05-01-SUMMARY.md
@.planning/phases/05-templates-checklists/05-02-SUMMARY.md
@.planning/phases/05-templates-checklists/05-03-SUMMARY.md
@.planning/phases/05-templates-checklists/05-04-SUMMARY.md

Reference document:
@C:/Users/Jake/Downloads/home-care-os-docs/phase-05-templates-checklists.md (section 5.5)

Property detail page:
@C:/Users/Jake/home-care-os/apps/admin/src/pages/properties/[id]/index.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create ChecklistPreview component</name>
  <files>apps/admin/src/components/inspections/checklist-preview.tsx</files>
  <action>
Create ChecklistPreview component:

1. Props: { checklist: GeneratedChecklist }

2. Header showing:
   - Total items count
   - Estimated duration in minutes

3. For each section in checklist.sections:
   - Card with CardHeader showing section name + item count badge
   - CardContent with list of items
   - Each item shows:
     - Checkbox (disabled, for preview)
     - Item text
     - Camera icon (filled for photo_required, outline for photo_recommended)
     - HelpCircle icon with Tooltip for help_text

4. Use existing UI components:
   - Card, CardHeader, CardTitle, CardContent
   - Badge, Checkbox
   - Tooltip, TooltipTrigger, TooltipContent
   - Icons: Camera, HelpCircle from lucide-react

5. Style items with proper spacing and alignment

Follow structure from phase-05-templates-checklists.md section 5.5.
  </action>
  <verify>TypeScript compiles: `cd apps/admin && npm run build`</verify>
  <done>ChecklistPreview component renders all sections and items with icons</done>
</task>

<task type="auto">
  <name>Task 2: Create barrel export</name>
  <files>apps/admin/src/components/inspections/index.ts</files>
  <action>
Create barrel export for inspections components:

```typescript
export { ChecklistPreview } from './checklist-preview'
```
  </action>
  <verify>File exists and exports correctly</verify>
  <done>Barrel export created for inspections components</done>
</task>

<task type="auto">
  <name>Task 3: Integrate into property detail page</name>
  <files>apps/admin/src/pages/properties/[id]/index.tsx</files>
  <action>
Add checklist preview section to property detail page:

1. Import ChecklistPreview from '@/components/inspections'
2. Import useGenerateChecklist from '@/hooks/use-checklist'
3. Import usePropertyProgram from '@/hooks/use-programs'

4. Get program for property using usePropertyProgram(propertyId)

5. Generate checklist using useGenerateChecklist(propertyId, program?.id)
   - Only enabled when program exists and is active

6. Add "Inspection Checklist" section after Program section:
   - Section heading: "Inspection Checklist"
   - Conditional rendering:
     - If no active program: "Activate a program to view inspection checklist"
     - If checklist loading: Loading spinner
     - If checklist ready: Render ChecklistPreview

7. Optional: Add "Preview Checklist" button in Program section that scrolls to checklist

8. Layout considerations:
   - Full-width section
   - Collapsible by default (optional) since checklists can be long
  </action>
  <verify>TypeScript compiles and property page shows checklist section</verify>
  <done>Checklist preview integrated into property detail page</done>
</task>

<task type="auto">
  <name>Task 4: End-to-end testing</name>
  <files>apps/admin/src/pages/properties/[id]/index.tsx</files>
  <action>
Verify the complete templates & checklists flow:

1. Start dev server: `cd apps/admin && npm run dev`

2. Test Template Management:
   - Navigate to /settings/templates
   - Verify templates load (may be empty initially)
   - Click "New Template"
   - Fill in template details
   - Save and verify it appears

3. Test Checklist Generation:
   - Navigate to a property WITH an active program
   - Verify "Inspection Checklist" section appears
   - Verify sections match property features (pool section if property has pool)
   - Verify item count and estimated duration show

4. Test without program:
   - Navigate to a property WITHOUT a program
   - Verify appropriate message shows

5. Run build to ensure no errors: `cd apps/admin && npm run build`
  </action>
  <verify>`cd apps/admin && npm run build` succeeds</verify>
  <done>Templates & Checklists feature works end-to-end</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `cd apps/admin && npm run build` succeeds
- [ ] ChecklistPreview renders correctly
- [ ] Property page shows checklist for properties with programs
- [ ] Template management UI accessible and functional
</verification>

<success_criteria>
- All tasks completed
- No TypeScript errors
- Phase 5 acceptance criteria met:
  - Checklist generates based on tier (cumulative items)
  - Checklist includes property feature-specific sections
  - Checklist includes equipment-specific items from AI
  - Duration estimate calculates correctly
  - Template management UI allows CRUD
  - Checklist preview displays all sections/items
  - Photo required/recommended indicators show
  - Help text displays on hover
</success_criteria>

<output>
After completion, create `.planning/phases/05-templates-checklists/05-05-SUMMARY.md`

Update STATE.md with Phase 5 completion status.
Update ROADMAP.md to mark Phase 5 complete.
</output>
