---
phase: 04-programs-pricing
plan: 04
type: execute
wave: 3
depends_on: ["04-02"]
files_modified:
  - apps/admin/src/components/programs/program-status-card.tsx
  - apps/admin/src/components/programs/index.ts
autonomous: true
---

<objective>
Build the Program Status Card component for viewing and managing existing programs.

Purpose: Display program details and provide pause/resume/cancel actions.
Output: ProgramStatusCard component with lifecycle management.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

Prior plan outputs:
@.planning/phases/04-programs-pricing/04-01-SUMMARY.md
@.planning/phases/04-programs-pricing/04-02-SUMMARY.md

Reference document:
@C:/Users/Jake/Downloads/home-care-os-docs/phase-04-programs-pricing.md (section 4.7)

Existing UI patterns:
@C:/Users/Jake/home-care-os/apps/admin/src/components/ui/card.tsx
@C:/Users/Jake/home-care-os/apps/admin/src/components/ui/dropdown-menu.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Program Status Card component</name>
  <files>apps/admin/src/components/programs/program-status-card.tsx</files>
  <action>
Create ProgramStatusCard component:

1. Props: { propertyId, onEdit? }

2. State: showCancelDialog (boolean)

3. Hooks:
   - usePropertyProgram(propertyId)
   - usePauseProgram, useResumeProgram, useCancelProgram

4. Loading state: Show "Loading..." in Card

5. No program state: Return null (parent will show builder)

6. Card layout:
   - Header: "Home Care Program" title + status badge + dropdown menu
   - Status badge colors: active=green, paused=yellow, pending=blue, cancelled=gray

7. Dropdown menu:
   - Edit Program (always)
   - Pause Program (if active)
   - Resume Program (if paused)
   - Separator
   - Cancel Program (destructive)

8. Card content:
   - 2-column grid: Frequency (with Calendar icon), Tier (with CheckCircle icon)
   - Active add-ons section with badges (if any)
   - Monthly fee with DollarSign icon
   - Active since date (if activated_at exists)

9. Cancel confirmation AlertDialog:
   - Title: "Cancel Program"
   - Description warning about stopping inspections and billing
   - "Keep Program" and "Cancel Program" buttons

10. Action handlers:
    - handlePause: Call pauseProgram.mutateAsync, toast on success/error
    - handleResume: Call resumeProgram.mutateAsync, toast on success/error
    - handleCancel: Call cancelProgram.mutateAsync, close dialog, toast

Follow exact structure from phase-04-programs-pricing.md section 4.7.
  </action>
  <verify>TypeScript compiles: `cd apps/admin && npm run build`</verify>
  <done>ProgramStatusCard component renders with lifecycle actions</done>
</task>

<task type="auto">
  <name>Task 2: Update barrel export</name>
  <files>apps/admin/src/components/programs/index.ts</files>
  <action>
Update barrel export to include ProgramStatusCard:

```typescript
export { ProgramBuilder } from './program-builder'
export { ProgramStatusCard } from './program-status-card'
```
  </action>
  <verify>File exports both components</verify>
  <done>Barrel export updated with ProgramStatusCard</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `cd apps/admin && npm run build` succeeds
- [ ] ProgramStatusCard renders program details
- [ ] Dropdown actions work correctly
- [ ] Cancel dialog appears and functions
</verification>

<success_criteria>
- All tasks completed
- No TypeScript errors
- ProgramStatusCard ready for integration
</success_criteria>

<output>
After completion, create `.planning/phases/04-programs-pricing/04-04-SUMMARY.md`
</output>
