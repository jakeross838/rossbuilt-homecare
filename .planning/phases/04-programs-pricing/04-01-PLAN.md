---
phase: 04-programs-pricing
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - apps/admin/src/lib/constants/pricing.ts
  - apps/admin/src/lib/validations/pricing.ts
  - apps/admin/src/lib/validations/program.ts
autonomous: true
---

<objective>
Create pricing constants and validation schemas for programs and pricing configuration.

Purpose: Establish the data foundation for the program builder and pricing engine.
Output: Constants for frequencies, tiers, and addons; Zod schemas for validation.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

Reference document:
@C:/Users/Jake/Downloads/home-care-os-docs/phase-04-programs-pricing.md (sections 4.1-4.3)

Database schema (pricing_config table exists):
@C:/Users/Jake/home-care-os/supabase/migrations/016_settings.sql

Existing patterns:
@C:/Users/Jake/home-care-os/apps/admin/src/lib/constants/equipment.ts
@C:/Users/Jake/home-care-os/apps/admin/src/lib/validations/equipment.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create pricing constants</name>
  <files>apps/admin/src/lib/constants/pricing.ts</files>
  <action>
Create pricing constants file with:

1. INSPECTION_FREQUENCIES array:
   - value, label, description, inspectionsPerYear
   - Values: annual, semi_annual, quarterly, monthly, bi_weekly

2. INSPECTION_TIERS array:
   - value, label, description, includes[], doesNotInclude[], note?
   - Values: visual, functional, comprehensive, preventative
   - Each tier builds on the previous one

3. PROGRAM_ADDONS array:
   - value, label, description
   - Values: digital_manual, warranty_tracking, emergency_response, hurricane_monitoring

4. DAYS_OF_WEEK array:
   - value (0-6), label (Sunday-Saturday)

5. TIME_SLOTS array:
   - value, label
   - Values: morning, afternoon, anytime

6. Export all as const for type inference

Follow exact structure from phase-04-programs-pricing.md section 4.1.
  </action>
  <verify>TypeScript compiles: `cd apps/admin && npm run build`</verify>
  <done>Pricing constants created with frequencies, tiers, addons, days, time slots</done>
</task>

<task type="auto">
  <name>Task 2: Create pricing configuration schema</name>
  <files>apps/admin/src/lib/validations/pricing.ts</files>
  <action>
Create Zod schema for pricing configuration:

1. Import z from 'zod'

2. Create pricingConfigSchema with nested objects:
   - frequency_pricing: annual, semi_annual, quarterly, monthly, bi_weekly (all coerced numbers)
   - tier_pricing: visual, functional, comprehensive, preventative
   - addon_pricing: digital_manual, warranty_tracking, emergency_response, hurricane_monitoring
   - service_rates: hourly_rate, pre_storm_prep, post_storm_inspection, arrival_prep, departure_check, home_manual_creation, vendor_markup_percent

3. All numeric fields use z.coerce.number().min(0)
4. vendor_markup_percent has .max(100)

5. Export PricingConfig type inferred from schema

Follow exact structure from phase-04-programs-pricing.md section 4.2.
  </action>
  <verify>TypeScript compiles: `cd apps/admin && npm run build`</verify>
  <done>Pricing config Zod schema created with all nested fields</done>
</task>

<task type="auto">
  <name>Task 3: Create program validation schema</name>
  <files>apps/admin/src/lib/validations/program.ts</files>
  <action>
Create Zod schema for program form:

1. Import z from 'zod'

2. Create programSchema with fields:
   - property_id: z.string().uuid()
   - client_id: z.string().uuid()
   - inspection_frequency: z.enum(['annual', 'semi_annual', 'quarterly', 'monthly', 'bi_weekly'])
   - inspection_tier: z.enum(['visual', 'functional', 'comprehensive', 'preventative'])
   - addon_digital_manual: z.boolean().default(false)
   - addon_warranty_tracking: z.boolean().default(false)
   - addon_emergency_response: z.boolean().default(false)
   - addon_hurricane_monitoring: z.boolean().default(false)
   - preferred_day_of_week: z.coerce.number().min(0).max(6).optional().nullable()
   - preferred_time_slot: z.enum(['morning', 'afternoon', 'anytime']).optional()
   - preferred_inspector_id: z.string().uuid().optional().nullable()
   - billing_start_date: z.string().optional()
   - billing_day_of_month: z.coerce.number().min(1).max(28).default(1)
   - vendor_markup_percent: z.coerce.number().min(0).max(50).default(15)
   - notes: z.string().optional()

3. Export ProgramFormData type inferred from schema

Follow exact structure from phase-04-programs-pricing.md section 4.3.
  </action>
  <verify>TypeScript compiles: `cd apps/admin && npm run build`</verify>
  <done>Program form Zod schema created with all fields and types</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `cd apps/admin && npm run build` succeeds
- [ ] All constants export correctly with `as const`
- [ ] Both Zod schemas export correctly
- [ ] Types inferred from schemas
</verification>

<success_criteria>
- All tasks completed
- No TypeScript errors
- Constants and schemas ready for hooks and components
</success_criteria>

<output>
After completion, create `.planning/phases/04-programs-pricing/04-01-SUMMARY.md`
</output>
