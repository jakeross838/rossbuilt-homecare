---
phase: 03-equipment-ai
plan: 04
type: execute
wave: 3
depends_on: ["03-01", "03-02", "03-03"]
files_modified:
  - apps/admin/src/pages/properties/[id]/index.tsx
autonomous: true
---

<objective>
Integrate equipment components into property detail page and perform end-to-end testing.

Purpose: Complete the equipment feature by wiring up all components and verifying the full flow.
Output: Working equipment management within property pages, AI generation functional.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

Prior plan outputs:
@.planning/phases/03-equipment-ai/03-01-SUMMARY.md
@.planning/phases/03-equipment-ai/03-02-SUMMARY.md
@.planning/phases/03-equipment-ai/03-03-SUMMARY.md

Property detail page to modify:
@C:/Users/Jake/home-care-os/apps/admin/src/pages/properties/[id]/index.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Integrate equipment into property detail page</name>
  <files>apps/admin/src/pages/properties/[id]/index.tsx</files>
  <action>
Add equipment section to property detail page:

1. Import EquipmentList from './components/equipment-list'

2. Add EquipmentList component after the property details section:
   - Pass propertyId from the page params
   - Wrap in a section with appropriate spacing

3. Consider using Tabs to organize property page sections:
   - Tab 1: "Details" - existing property info
   - Tab 2: "Equipment" - EquipmentList component
   - OR simply add EquipmentList as a new section below property details

4. Ensure the layout flows well:
   - Property header/info at top
   - Equipment section below
   - Consistent spacing with rest of app

5. Add barrel export in components/index.ts if not exists
  </action>
  <verify>TypeScript compiles: `cd apps/admin && npm run build`</verify>
  <done>Property detail page includes equipment section</done>
</task>

<task type="auto">
  <name>Task 2: End-to-end testing</name>
  <files>apps/admin/src/pages/properties/[id]/index.tsx</files>
  <action>
Verify the complete equipment flow works:

1. Start dev server: `cd apps/admin && npm run dev`

2. Test equipment CRUD:
   - Navigate to a property detail page
   - Click "Add Equipment"
   - Select category (e.g., HVAC)
   - Verify type dropdown filters correctly
   - Fill required fields and optional fields
   - Submit and verify equipment appears in list
   - Click equipment to open detail sheet
   - Verify details tab shows correct info

3. Test AI generation (if ANTHROPIC_API_KEY is set):
   - Click "Generate" button on equipment without AI content
   - Verify loading state shows
   - Verify AI content populates in maintenance/checklist/troubleshoot tabs
   - Verify "AI Ready" badge appears after generation

4. Fix any issues found during testing:
   - TypeScript errors
   - Runtime errors
   - UI/UX issues
   - Missing imports

5. Run build to ensure no errors: `cd apps/admin && npm run build`
  </action>
  <verify>`cd apps/admin && npm run build` succeeds</verify>
  <done>Equipment feature works end-to-end: add, view, generate AI</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `cd apps/admin && npm run build` succeeds
- [ ] Equipment section visible on property detail page
- [ ] Can add equipment
- [ ] Can view equipment details
- [ ] AI generation button present (functional if API key configured)
</verification>

<success_criteria>
- All tasks completed
- No TypeScript errors
- Equipment feature integrated and functional
- Phase 3 acceptance criteria met:
  - Can add equipment with category/type selection
  - Type dropdown filters based on category
  - Equipment displays grouped by category
  - Can view equipment details in sheet
  - Generate AI button calls edge function
  - AI content displays in tabs
</success_criteria>

<output>
After completion, create `.planning/phases/03-equipment-ai/03-04-SUMMARY.md`

Update STATE.md with Phase 3 completion status.
Update ROADMAP.md to mark Phase 3 complete.
</output>
